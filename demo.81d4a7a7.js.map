{"version":3,"sources":["webpack:///demo.81d4a7a7.js","webpack:///./demo/src/App.js?cc05","webpack:///./~/preact-smitty/dist/preact-smitty.js","webpack:///./~/preact/dist/preact.js","webpack:///./demo/src/index.js","webpack:///./demo/src/App.js","webpack:///./src/index.js","webpack:///./~/mitt/dist/mitt.js"],"names":["webpackJsonp","+iyJ","module","exports","0","__webpack_require__","97Jz","t","o","e","store","state","n","r","this","call","handleStoreUpdate","updateAnimId","setTimeout","setState","props","context","on","__proto__","prototype","Object","create","constructor","componentWillUnmount","window","clearTimeout","off","render","h","assign","emit","Component","defineProperty","value","apply","arguments","getChildContext","children","Provider","connect","EF6w","global","factory","VNode","nodeName","attributes","key","lastSimple","child","simple","i","length","stack","push","pop","Array","String","p","EMPTY_CHILDREN","options","vnode","extend","obj","clone","delve","split","isFunction","isString","hashToClassName","c","str","prop","cloneElement","slice","createLinkedState","component","eventPath","path","target","v","type","match","checked","enqueueRender","_dirty","items","debounceRendering","defer","rerender","list","renderComponent","isFunctionalComponent","buildFunctionalComponent","getNodeProps","EMPTY","isSameNodeType","node","Text","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","defaultProps","removeNode","parentNode","removeChild","setAccessor","name","old","isSvg","style","cssText","NON_DIMENSION_PROPS","innerHTML","__html","l","_listeners","substring","addEventListener","eventProxy","NON_BUBBLING_EVENTS","removeEventListener","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","className","event","collectNode","Element","_component","_name","nodes","createNode","document","createElementNS","createElement","flushMounts","mounts","afterMount","componentDidMount","diff","dom","mountAll","parent","componentRoot","diffLevel","isSvgMode","ownerSVGElement","hydrating","ATTR_KEY","ret","idiff","appendChild","ref","nodeValue","recollectNodeTree","createTextNode","buildComponentFromVNode","out","prevSvgMode","vchildren","firstChild","replaceChild","fc","a","nextSibling","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","absorb","j","vchild","originalChildren","childNodes","keyed","keyedLen","min","len","childrenLen","vlen","_child","__key","insertBefore","unmountOnly","unmountComponent","lastChild","attrs","collectComponent","components","createComponent","Ctor","inst","nextBase","splice","setComponentProps","opts","_disable","__ref","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","skip","rendered","cbase","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","shouldComponentUpdate","componentWillUpdate","toUnmount","childComponent","childProps","_parentComponent","baseParent","componentRef","unshift","componentDidUpdate","afterUpdate","fn","cb","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","remove","beforeUnmount","inner","componentDidUnmount","merge","lcCache","s","resolved","Promise","resolve","f","then","Symbol","for","boxFlex","boxFlexGroup","columnCount","fillOpacity","flex","flexGrow","flexPositive","flexShrink","flexNegative","fontWeight","lineClamp","lineHeight","opacity","order","orphans","strokeOpacity","widows","zIndex","zoom","blur","error","focus","load","resize","scroll","linkState","_linkedStates","callback","forceUpdate","NNls","ctQG","__webpack_exports__","run","Root","default","root","__WEBPACK_IMPORTED_MODULE_0_preact__","test","querySelector","jFIt","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","enumerable","writable","configurable","setPrototypeOf","_asyncToGenerator","gen","reject","step","arg","info","done","err","Image","_ref4","image","index","__WEBPACK_IMPORTED_MODULE_1_preact__","position","width","href","src","GithubRibbon","frameborder","scrolling","height","marginLeft","_store$handleActions","__WEBPACK_IMPORTED_MODULE_0__style_css__","__WEBPACK_IMPORTED_MODULE_2_preact_smitty__","__WEBPACK_IMPORTED_MODULE_3__src__","__WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__","_this","camera","recording","stream","MediaStream","images","createActions","startMediaStream","_ref","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","audio","video","sent","actions","mediaStreamSuccess","t0","mediaStreamError","stop","_x","addImage","handleActions","streamError","Camera","_Component","_temp","_this2","_ret","_len","args","_key","concat","canvas","handleClick","ctx","getContext","videoWidth","videoHeight","fillRect","drawImage","toDataURL","_ref2","_this3","paddingTop","paddingRight","paddingBottom","paddingLeft","marginBottom","textAlign","color","transition","maxHeight","background","cursor","URL","createObjectURL","autoplay","muted","onClick","display","alignItems","justifyContent","marginTop","margin","fontSize","border","outline","boxShadow","borderRadius","disabled","ImageList","_ref3","flexFlow","map","App","_ref5","overflow","WebkitOverflowScrolling","borderLeft","borderBottom","lVK7","createStore","initialState","Store","__WEBPACK_IMPORTED_MODULE_0_mitt__","__WEBPACK_IMPORTED_MODULE_0_mitt___default","_createClass","defineProperties","descriptor","protoProps","staticProps","_state","events","bind","payload","createAction","actionCreator","toString","actionMap","creatorName","handlerMap","_loop","handler","eventType","get","set","nextState","tNdy","u","indexOf"],"mappings":"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","file":"demo.81d4a7a7.js","sourcesContent":["webpackJsonp([0,1],{\n\n/***/ \"+iyJ\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"var _this = this,\\n    _store$handleActions;\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return call && (typeof call === \\\"object\\\" || typeof call === \\\"function\\\") ? call : self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function, not \\\" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\\n\\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\\\"next\\\", value); }, function (err) { step(\\\"throw\\\", err); }); } } return step(\\\"next\\\"); }); }; }\\n\\n/** @jsx h */\\nimport './style.css';\\nimport { render, h, Component } from 'preact';\\nimport { Provider, connect } from 'preact-smitty';\\nimport { createStore } from '../../src';\\nimport source from 'raw-loader!./App.js';\\n\\nvar store = createStore({\\n  camera: {\\n    recording: false,\\n    stream: new window.MediaStream(),\\n    images: []\\n  }\\n});\\n\\nstore.createActions({\\n  startMediaStream: function startMediaStream() {\\n    return function () {\\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\\n        var stream;\\n        return regeneratorRuntime.wrap(function _callee$(_context) {\\n          while (1) {\\n            switch (_context.prev = _context.next) {\\n              case 0:\\n                _context.prev = 0;\\n                _context.next = 3;\\n                return navigator.mediaDevices.getUserMedia({\\n                  audio: false,\\n                  video: true\\n                });\\n\\n              case 3:\\n                stream = _context.sent;\\n\\n                store.actions.mediaStreamSuccess(stream);\\n                _context.next = 10;\\n                break;\\n\\n              case 7:\\n                _context.prev = 7;\\n                _context.t0 = _context['catch'](0);\\n\\n                store.actions.mediaStreamError(_context.t0);\\n\\n              case 10:\\n              case 'end':\\n                return _context.stop();\\n            }\\n          }\\n        }, _callee, _this, [[0, 7]]);\\n      }));\\n\\n      return function (_x) {\\n        return _ref.apply(this, arguments);\\n      };\\n    }();\\n  },\\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\\n  mediaStreamError: 'camera/STREAM_ERROR',\\n  addImage: 'camera/ADD_IMAGE'\\n});\\n\\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\\n  state.camera.stream = stream;\\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\\n  state.camera.streamError = error;\\n}, _store$handleActions[store.actions.addImage] = function (state, image) {\\n  state.camera.images.push(image);\\n}, _store$handleActions));\\n\\nvar pp = function pp(obj) {\\n  return JSON.stringify(obj, null, 2);\\n};\\n\\nvar Camera = connect(function (state) {\\n  return {\\n    stream: state.camera.stream,\\n    streamError: state.camera.streamError\\n  };\\n})(function (_Component) {\\n  _inherits(Camera, _Component);\\n\\n  function Camera() {\\n    var _temp, _this2, _ret;\\n\\n    _classCallCheck(this, Camera);\\n\\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\\n      args[_key] = arguments[_key];\\n    }\\n\\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\\n      var canvas = _this2.canvas;\\n      var ctx = canvas.getContext('2d');\\n      var width = _this2.video.videoWidth;\\n      var height = _this2.video.videoHeight;\\n      canvas.width = width;\\n      canvas.height = height;\\n      ctx.fillRect(0, 0, width, height);\\n      ctx.drawImage(_this2.video, 0, 0, width, height);\\n\\n      _this2.context.store.actions.addImage(canvas.toDataURL('image/webp'));\\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\\n  }\\n\\n  Camera.prototype.componentDidMount = function componentDidMount() {\\n    var action = this.context.store.actions.startMediaStream('test');\\n    action();\\n  };\\n\\n  Camera.prototype.render = function render(_ref2) {\\n    var _this3 = this;\\n\\n    var streamError = _ref2.streamError;\\n\\n    return h(\\n      'div',\\n      {\\n        style: {\\n          paddingTop: 16,\\n          paddingRight: 16,\\n          paddingBottom: 16,\\n          paddingLeft: 16\\n        }\\n      },\\n      h(\\n        'h3',\\n        { style: {\\n            height: streamError ? 24 : 0,\\n            lineHeight: '1.2',\\n            marginBottom: 16,\\n            textAlign: 'center', color: '#ff6b6b',\\n            opacity: streamError ? 1 : 0,\\n            transition: 'all 250ms ease-in-out'\\n          } },\\n        streamError ? streamError.name : ''\\n      ),\\n      h('video', {\\n        ref: function ref(node) {\\n          _this3.video = node;\\n        },\\n        style: {\\n          width: '100%',\\n          maxHeight: 'calc(50vh - 16px)',\\n          background: '#212529',\\n          cursor: 'pointer'\\n        },\\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\\n        autoplay: true,\\n        muted: true,\\n        onClick: this.handleClick\\n      }),\\n      h('canvas', {\\n        ref: function ref(node) {\\n          _this3.canvas = node;\\n        },\\n        style: { display: 'none' }\\n      }),\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            justifyContent: 'center',\\n            width: '100%',\\n            marginTop: 16,\\n            marginBottom: 16\\n          }\\n        },\\n        h(\\n          'button',\\n          {\\n            style: {\\n              paddingTop: 8,\\n              paddingRight: 16,\\n              paddingBottom: 8,\\n              paddingLeft: 16,\\n              margin: '0 auto',\\n              fontSize: 20,\\n              lineHeight: '1.6',\\n              color: '#adb5bd',\\n              background: '#343a40',\\n              border: 'none',\\n              outline: 'none',\\n              boxShadow: 'none',\\n              borderRadius: 5,\\n              cursor: 'pointer',\\n              opacity: streamError ? 0 : 1,\\n              transition: 'all 250ms ease-in-out'\\n            },\\n            disabled: streamError,\\n            type: 'button',\\n            onClick: this.handleClick\\n          },\\n          'Take Picture'\\n        )\\n      )\\n    );\\n  };\\n\\n  return Camera;\\n}(Component));\\n\\nvar ImageList = connect(function (state) {\\n  return {\\n    images: state.camera.images\\n  };\\n})(function ImageList(_ref3) {\\n  var images = _ref3.images;\\n\\n  return h(\\n    'div',\\n    {\\n      style: {\\n        display: 'flex',\\n        flexFlow: 'wrap'\\n      }\\n    },\\n    images.map(function (image, i) {\\n      return h(Image, { image: image, index: i });\\n    })\\n  );\\n});\\n\\nfunction Image(_ref4) {\\n  var image = _ref4.image,\\n      index = _ref4.index;\\n\\n  return h(\\n    'a',\\n    {\\n      style: {\\n        position: 'relative',\\n        flex: '0 0 auto',\\n        width: '33%',\\n        order: index * -1\\n      },\\n      href: image\\n    },\\n    h('img', { src: image, style: { width: '100%' } })\\n  );\\n}\\n\\nfunction GithubRibbon() {\\n  return h('iframe', {\\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\\n    frameborder: '0',\\n    scrolling: '0',\\n    width: '160px',\\n    height: '30px',\\n    style: { marginLeft: 'auto' }\\n  });\\n}\\n\\nvar App = connect(function (state) {\\n  return state;\\n})(function (props) {\\n  var _ref5;\\n\\n  return h(\\n    'div',\\n    { style: { display: 'flex' } },\\n    h(\\n      'div',\\n      {\\n        style: (_ref5 = {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#212529',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }, _ref5['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref5.cursor = 'pointer', _ref5.transition = 'all 250ms ease-in-out', _ref5)\\n      },\\n      h(Camera, null)\\n    ),\\n    h(\\n      'div',\\n      {\\n        style: {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#f8f9fa',\\n          borderLeft: '1px solid #dee2e6',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }\\n      },\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            borderBottom: '1px solid #dee2e6',\\n            paddingRight: 8,\\n            paddingLeft: 8\\n          }\\n        },\\n        h(\\n          'h2',\\n          null,\\n          'Smitty Demo'\\n        ),\\n        h(\\n          'a',\\n          {\\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\\n            target: '_blank'\\n          },\\n          'source'\\n        ),\\n        h(GithubRibbon, null)\\n      ),\\n      h(ImageList, null)\\n    )\\n  );\\n});\\n\\nvar Root = function Root(props) {\\n  return h(\\n    Provider,\\n    { store: store },\\n    h(App, null)\\n  );\\n};\\n\\nexport default Root;\"\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"ctQG\");\n\n\n/***/ }),\n\n/***/ \"97Jz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction t(t){function o(e,o){if(\"function\"==typeof t)return t(o.store.state,e)}return function(t){return function(n){function r(t,e){var r=this;n.call(this,t,e),this.state=o(t,e),this.handleStoreUpdate=function(){r.updateAnimId=setTimeout(function(){r.setState(o(r.props,r.context))})},e.store.on('*',this.handleStoreUpdate)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.componentWillUnmount=function(){window.clearTimeout(this.updateAnimId),this.context.store.off('*',this.handleStoreUpdate)},r.prototype.render=function(o, n){return e.h(t,Object.assign({},Object.assign({},o),n,{emit:this.context.store.emit}))},r}(e.Component)}}Object.defineProperty(exports,\"__esModule\",{value:!0});var e=__webpack_require__(\"EF6w\"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{store:this.props.store}},e.prototype.render=function(t){return t.children[0]},e}(e.Component);exports.Provider=o,exports.connect=t;\n//# sourceMappingURL=preact-smitty.js.map\n\n\n/***/ }),\n\n/***/ \"EF6w\":\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(global, factory) {\n     true ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var children, lastSimple, child, simple, i;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !0 && child !== !1) {\n            if ('number' == typeof child) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                (children || (children = [])).push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || EMPTY_CHILDREN);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else ;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent && 'undefined' != typeof parent.ownerSVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var ref = vnode && vnode.attributes && vnode.attributes.ref;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text && dom.parentNode) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll, !!props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        if (ref) (props.ref = ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, absorb) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || absorb || props || _child instanceof Text) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if (!(attrs && name in attrs) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        if (attrs) for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n/***/ }),\n\n/***/ \"NNls\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"ctQG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"EF6w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n// eslint-disable-next-line no-unused-vars\n/** @jsx h */\n\n\nvar root = void 0;\nfunction run() {\n  var Root = __webpack_require__(\"jFIt\").default;\n  root = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"render\"])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(Root, { test: 'foo' }), document.querySelector('#demo'), root);\n}\n\nrun();\n\nif (false) {\n  // Whenever a new version of App.js is available\n  module.hot.accept('./App', function () {\n    // Require the new version and render it instead\n    run();\n  });\n}\n\n/***/ }),\n\n/***/ \"jFIt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_css__ = __webpack_require__(\"NNls\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact__ = __webpack_require__(\"EF6w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_smitty__ = __webpack_require__(\"97Jz\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_smitty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src__ = __webpack_require__(\"lVK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__ = __webpack_require__(\"+iyJ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_raw_loader_App_js__);\nvar _this = this,\n    _store$handleActions;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n/** @jsx h */\n\n\n\n\n\n\nvar store = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__src__[\"a\" /* createStore */])({\n  camera: {\n    recording: false,\n    stream: new window.MediaStream(),\n    images: []\n  }\n});\n\nstore.createActions({\n  startMediaStream: function startMediaStream() {\n    return function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\n        var stream;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return navigator.mediaDevices.getUserMedia({\n                  audio: false,\n                  video: true\n                });\n\n              case 3:\n                stream = _context.sent;\n\n                store.actions.mediaStreamSuccess(stream);\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context['catch'](0);\n\n                store.actions.mediaStreamError(_context.t0);\n\n              case 10:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[0, 7]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  },\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\n  mediaStreamError: 'camera/STREAM_ERROR',\n  addImage: 'camera/ADD_IMAGE'\n});\n\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\n  state.camera.stream = stream;\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\n  state.camera.streamError = error;\n}, _store$handleActions[store.actions.addImage] = function (state, image) {\n  state.camera.images.push(image);\n}, _store$handleActions));\n\nvar pp = function pp(obj) {\n  return JSON.stringify(obj, null, 2);\n};\n\nvar Camera = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return {\n    stream: state.camera.stream,\n    streamError: state.camera.streamError\n  };\n})(function (_Component) {\n  _inherits(Camera, _Component);\n\n  function Camera() {\n    var _temp, _this2, _ret;\n\n    _classCallCheck(this, Camera);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\n      var canvas = _this2.canvas;\n      var ctx = canvas.getContext('2d');\n      var width = _this2.video.videoWidth;\n      var height = _this2.video.videoHeight;\n      canvas.width = width;\n      canvas.height = height;\n      ctx.fillRect(0, 0, width, height);\n      ctx.drawImage(_this2.video, 0, 0, width, height);\n\n      _this2.context.store.actions.addImage(canvas.toDataURL('image/webp'));\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\n  }\n\n  Camera.prototype.componentDidMount = function componentDidMount() {\n    var action = this.context.store.actions.startMediaStream('test');\n    action();\n  };\n\n  Camera.prototype.render = function render(_ref2) {\n    var _this3 = this;\n\n    var streamError = _ref2.streamError;\n\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: {\n          paddingTop: 16,\n          paddingRight: 16,\n          paddingBottom: 16,\n          paddingLeft: 16\n        }\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'h3',\n        { style: {\n            height: streamError ? 24 : 0,\n            lineHeight: '1.2',\n            marginBottom: 16,\n            textAlign: 'center', color: '#ff6b6b',\n            opacity: streamError ? 1 : 0,\n            transition: 'all 250ms ease-in-out'\n          } },\n        streamError ? streamError.name : ''\n      ),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('video', {\n        ref: function ref(node) {\n          _this3.video = node;\n        },\n        style: {\n          width: '100%',\n          maxHeight: 'calc(50vh - 16px)',\n          background: '#212529',\n          cursor: 'pointer'\n        },\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\n        autoplay: true,\n        muted: true,\n        onClick: this.handleClick\n      }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('canvas', {\n        ref: function ref(node) {\n          _this3.canvas = node;\n        },\n        style: { display: 'none' }\n      }),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'div',\n        {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%',\n            marginTop: 16,\n            marginBottom: 16\n          }\n        },\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'button',\n          {\n            style: {\n              paddingTop: 8,\n              paddingRight: 16,\n              paddingBottom: 8,\n              paddingLeft: 16,\n              margin: '0 auto',\n              fontSize: 20,\n              lineHeight: '1.6',\n              color: '#adb5bd',\n              background: '#343a40',\n              border: 'none',\n              outline: 'none',\n              boxShadow: 'none',\n              borderRadius: 5,\n              cursor: 'pointer',\n              opacity: streamError ? 0 : 1,\n              transition: 'all 250ms ease-in-out'\n            },\n            disabled: streamError,\n            type: 'button',\n            onClick: this.handleClick\n          },\n          'Take Picture'\n        )\n      )\n    );\n  };\n\n  return Camera;\n}(__WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"]));\n\nvar ImageList = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return {\n    images: state.camera.images\n  };\n})(function ImageList(_ref3) {\n  var images = _ref3.images;\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'div',\n    {\n      style: {\n        display: 'flex',\n        flexFlow: 'wrap'\n      }\n    },\n    images.map(function (image, i) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(Image, { image: image, index: i });\n    })\n  );\n});\n\nfunction Image(_ref4) {\n  var image = _ref4.image,\n      index = _ref4.index;\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'a',\n    {\n      style: {\n        position: 'relative',\n        flex: '0 0 auto',\n        width: '33%',\n        order: index * -1\n      },\n      href: image\n    },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('img', { src: image, style: { width: '100%' } })\n  );\n}\n\nfunction GithubRibbon() {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])('iframe', {\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\n    frameborder: '0',\n    scrolling: '0',\n    width: '160px',\n    height: '30px',\n    style: { marginLeft: 'auto' }\n  });\n}\n\nvar App = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"connect\"])(function (state) {\n  return state;\n})(function (props) {\n  var _ref5;\n\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    'div',\n    { style: { display: 'flex' } },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: (_ref5 = {\n          flex: '1 0 50%',\n          height: '100vh',\n          background: '#212529',\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch'\n        }, _ref5['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref5.cursor = 'pointer', _ref5.transition = 'all 250ms ease-in-out', _ref5)\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(Camera, null)\n    ),\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n      'div',\n      {\n        style: {\n          flex: '1 0 50%',\n          height: '100vh',\n          background: '#f8f9fa',\n          borderLeft: '1px solid #dee2e6',\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch'\n        }\n      },\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n        'div',\n        {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            borderBottom: '1px solid #dee2e6',\n            paddingRight: 8,\n            paddingLeft: 8\n          }\n        },\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'h2',\n          null,\n          'Smitty Demo'\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n          'a',\n          {\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\n            target: '_blank'\n          },\n          'source'\n        ),\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(GithubRibbon, null)\n      ),\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(ImageList, null)\n    )\n  );\n});\n\nvar Root = function Root(props) {\n  return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(\n    __WEBPACK_IMPORTED_MODULE_2_preact_smitty__[\"Provider\"],\n    { store: store },\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"])(App, null)\n  );\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = Root;\n\n/***/ }),\n\n/***/ \"lVK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mitt__ = __webpack_require__(\"tNdy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mitt___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mitt__);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = createStore;\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Store = function () {\n  function Store(initialState) {\n    _classCallCheck(this, Store);\n\n    this._state = initialState;\n    this.actions = {};\n    this.events = __WEBPACK_IMPORTED_MODULE_0_mitt___default()();\n    this.on = this.events.on;\n    this.off = this.events.off;\n    this.emit = this.emit.bind(this);\n    this.handleActions = this.handleActions.bind(this);\n  }\n\n  Store.prototype.emit = function emit(type, payload) {\n    if (typeof type === 'function') return type(this);\n    this.events.emit(type, payload);\n  };\n\n  Store.prototype.createAction = function createAction(type) {\n    var _this = this;\n\n    if (typeof type === 'function') {\n      return function (payload) {\n        return _this.emit(type(payload));\n      };\n    }\n\n    var actionCreator = function actionCreator(payload) {\n      return _this.emit(type, payload);\n    };\n    actionCreator.toString = function () {\n      return type.toString();\n    };\n    return actionCreator;\n  };\n\n  Store.prototype.createActions = function createActions(actionMap) {\n    for (var creatorName in actionMap) {\n      this.actions[creatorName] = this.createAction(actionMap[creatorName]);\n    }\n  };\n\n  Store.prototype.handleActions = function handleActions(handlerMap) {\n    var _this2 = this;\n\n    var _loop = function _loop(type) {\n      var handler = function handler(eventType, e) {\n        if (eventType.substring(0, 6) === 'store:') return;\n        _this2.state = handlerMap[type](_this2.state, e, eventType) || _this2.state;\n        _this2.events.emit('store:change', _this2.state);\n      };\n      if (type !== '*') {\n        handler = handler.bind(null, type);\n      }\n      _this2.events.on(type, handler);\n    };\n\n    for (var type in handlerMap) {\n      _loop(type);\n    }\n  };\n\n  _createClass(Store, [{\n    key: 'state',\n    get: function get() {\n      return this._state;\n    },\n    set: function set(nextState) {\n      this._state = nextState;\n    }\n  }]);\n\n  return Store;\n}();\n\nfunction createStore(initialState) {\n  return new Store(initialState);\n}\n\n/***/ }),\n\n/***/ \"tNdy\":\n/***/ (function(module, exports) {\n\nfunction n(n){return n=n||Object.create(null),{on:function(t,o){(n[t]||(n[t]=[])).push(o)},off:function(t,o){var u=n[t]||(n[t]=[]);u.splice(u.indexOf(o)>>>0,1)},emit:function(t,o){(n[t]||[]).map(function(n){n(o)}),(n[\"*\"]||[]).map(function(n){n(t,o)})}}}module.exports=n;\n//# sourceMappingURL=mitt.js.map\n\n/***/ })\n\n},[0]);\n\n\n// WEBPACK FOOTER //\n// demo.81d4a7a7.js","module.exports = \"var _this = this,\\n    _store$handleActions;\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return call && (typeof call === \\\"object\\\" || typeof call === \\\"function\\\") ? call : self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function, not \\\" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\\n\\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\\\"next\\\", value); }, function (err) { step(\\\"throw\\\", err); }); } } return step(\\\"next\\\"); }); }; }\\n\\n/** @jsx h */\\nimport './style.css';\\nimport { render, h, Component } from 'preact';\\nimport { Provider, connect } from 'preact-smitty';\\nimport { createStore } from '../../src';\\nimport source from 'raw-loader!./App.js';\\n\\nvar store = createStore({\\n  camera: {\\n    recording: false,\\n    stream: new window.MediaStream(),\\n    images: []\\n  }\\n});\\n\\nstore.createActions({\\n  startMediaStream: function startMediaStream() {\\n    return function () {\\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(store) {\\n        var stream;\\n        return regeneratorRuntime.wrap(function _callee$(_context) {\\n          while (1) {\\n            switch (_context.prev = _context.next) {\\n              case 0:\\n                _context.prev = 0;\\n                _context.next = 3;\\n                return navigator.mediaDevices.getUserMedia({\\n                  audio: false,\\n                  video: true\\n                });\\n\\n              case 3:\\n                stream = _context.sent;\\n\\n                store.actions.mediaStreamSuccess(stream);\\n                _context.next = 10;\\n                break;\\n\\n              case 7:\\n                _context.prev = 7;\\n                _context.t0 = _context['catch'](0);\\n\\n                store.actions.mediaStreamError(_context.t0);\\n\\n              case 10:\\n              case 'end':\\n                return _context.stop();\\n            }\\n          }\\n        }, _callee, _this, [[0, 7]]);\\n      }));\\n\\n      return function (_x) {\\n        return _ref.apply(this, arguments);\\n      };\\n    }();\\n  },\\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\\n  mediaStreamError: 'camera/STREAM_ERROR',\\n  addImage: 'camera/ADD_IMAGE'\\n});\\n\\nstore.handleActions((_store$handleActions = {}, _store$handleActions[store.actions.mediaStreamSuccess] = function (state, stream) {\\n  state.camera.stream = stream;\\n}, _store$handleActions[store.actions.mediaStreamError] = function (state, error) {\\n  state.camera.streamError = error;\\n}, _store$handleActions[store.actions.addImage] = function (state, image) {\\n  state.camera.images.push(image);\\n}, _store$handleActions));\\n\\nvar pp = function pp(obj) {\\n  return JSON.stringify(obj, null, 2);\\n};\\n\\nvar Camera = connect(function (state) {\\n  return {\\n    stream: state.camera.stream,\\n    streamError: state.camera.streamError\\n  };\\n})(function (_Component) {\\n  _inherits(Camera, _Component);\\n\\n  function Camera() {\\n    var _temp, _this2, _ret;\\n\\n    _classCallCheck(this, Camera);\\n\\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\\n      args[_key] = arguments[_key];\\n    }\\n\\n    return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.video = null, _this2.canvas = null, _this2.handleClick = function () {\\n      var canvas = _this2.canvas;\\n      var ctx = canvas.getContext('2d');\\n      var width = _this2.video.videoWidth;\\n      var height = _this2.video.videoHeight;\\n      canvas.width = width;\\n      canvas.height = height;\\n      ctx.fillRect(0, 0, width, height);\\n      ctx.drawImage(_this2.video, 0, 0, width, height);\\n\\n      _this2.context.store.actions.addImage(canvas.toDataURL('image/webp'));\\n    }, _temp), _possibleConstructorReturn(_this2, _ret);\\n  }\\n\\n  Camera.prototype.componentDidMount = function componentDidMount() {\\n    var action = this.context.store.actions.startMediaStream('test');\\n    action();\\n  };\\n\\n  Camera.prototype.render = function render(_ref2) {\\n    var _this3 = this;\\n\\n    var streamError = _ref2.streamError;\\n\\n    return h(\\n      'div',\\n      {\\n        style: {\\n          paddingTop: 16,\\n          paddingRight: 16,\\n          paddingBottom: 16,\\n          paddingLeft: 16\\n        }\\n      },\\n      h(\\n        'h3',\\n        { style: {\\n            height: streamError ? 24 : 0,\\n            lineHeight: '1.2',\\n            marginBottom: 16,\\n            textAlign: 'center', color: '#ff6b6b',\\n            opacity: streamError ? 1 : 0,\\n            transition: 'all 250ms ease-in-out'\\n          } },\\n        streamError ? streamError.name : ''\\n      ),\\n      h('video', {\\n        ref: function ref(node) {\\n          _this3.video = node;\\n        },\\n        style: {\\n          width: '100%',\\n          maxHeight: 'calc(50vh - 16px)',\\n          background: '#212529',\\n          cursor: 'pointer'\\n        },\\n        src: window.URL ? window.URL.createObjectURL(this.props.stream) : this.props.stream,\\n        autoplay: true,\\n        muted: true,\\n        onClick: this.handleClick\\n      }),\\n      h('canvas', {\\n        ref: function ref(node) {\\n          _this3.canvas = node;\\n        },\\n        style: { display: 'none' }\\n      }),\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            justifyContent: 'center',\\n            width: '100%',\\n            marginTop: 16,\\n            marginBottom: 16\\n          }\\n        },\\n        h(\\n          'button',\\n          {\\n            style: {\\n              paddingTop: 8,\\n              paddingRight: 16,\\n              paddingBottom: 8,\\n              paddingLeft: 16,\\n              margin: '0 auto',\\n              fontSize: 20,\\n              lineHeight: '1.6',\\n              color: '#adb5bd',\\n              background: '#343a40',\\n              border: 'none',\\n              outline: 'none',\\n              boxShadow: 'none',\\n              borderRadius: 5,\\n              cursor: 'pointer',\\n              opacity: streamError ? 0 : 1,\\n              transition: 'all 250ms ease-in-out'\\n            },\\n            disabled: streamError,\\n            type: 'button',\\n            onClick: this.handleClick\\n          },\\n          'Take Picture'\\n        )\\n      )\\n    );\\n  };\\n\\n  return Camera;\\n}(Component));\\n\\nvar ImageList = connect(function (state) {\\n  return {\\n    images: state.camera.images\\n  };\\n})(function ImageList(_ref3) {\\n  var images = _ref3.images;\\n\\n  return h(\\n    'div',\\n    {\\n      style: {\\n        display: 'flex',\\n        flexFlow: 'wrap'\\n      }\\n    },\\n    images.map(function (image, i) {\\n      return h(Image, { image: image, index: i });\\n    })\\n  );\\n});\\n\\nfunction Image(_ref4) {\\n  var image = _ref4.image,\\n      index = _ref4.index;\\n\\n  return h(\\n    'a',\\n    {\\n      style: {\\n        position: 'relative',\\n        flex: '0 0 auto',\\n        width: '33%',\\n        order: index * -1\\n      },\\n      href: image\\n    },\\n    h('img', { src: image, style: { width: '100%' } })\\n  );\\n}\\n\\nfunction GithubRibbon() {\\n  return h('iframe', {\\n    src: 'https://ghbtns.com/github-btn.html?user=tkh44&repo=smitty&type=star&count=true&size=large',\\n    frameborder: '0',\\n    scrolling: '0',\\n    width: '160px',\\n    height: '30px',\\n    style: { marginLeft: 'auto' }\\n  });\\n}\\n\\nvar App = connect(function (state) {\\n  return state;\\n})(function (props) {\\n  var _ref5;\\n\\n  return h(\\n    'div',\\n    { style: { display: 'flex' } },\\n    h(\\n      'div',\\n      {\\n        style: (_ref5 = {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#212529',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }, _ref5['background'] = props.camera.streamError ? '#f8f9fa' : '#212529', _ref5.cursor = 'pointer', _ref5.transition = 'all 250ms ease-in-out', _ref5)\\n      },\\n      h(Camera, null)\\n    ),\\n    h(\\n      'div',\\n      {\\n        style: {\\n          flex: '1 0 50%',\\n          height: '100vh',\\n          background: '#f8f9fa',\\n          borderLeft: '1px solid #dee2e6',\\n          overflow: 'auto',\\n          WebkitOverflowScrolling: 'touch'\\n        }\\n      },\\n      h(\\n        'div',\\n        {\\n          style: {\\n            display: 'flex',\\n            alignItems: 'center',\\n            borderBottom: '1px solid #dee2e6',\\n            paddingRight: 8,\\n            paddingLeft: 8\\n          }\\n        },\\n        h(\\n          'h2',\\n          null,\\n          'Smitty Demo'\\n        ),\\n        h(\\n          'a',\\n          {\\n            href: 'https://github.com/tkh44/smitty/tree/master/demo/src',\\n            style: { fontSize: '1rem', color: '#329af0', marginLeft: 8 },\\n            target: '_blank'\\n          },\\n          'source'\\n        ),\\n        h(GithubRibbon, null)\\n      ),\\n      h(ImageList, null)\\n    )\\n  );\\n});\\n\\nvar Root = function Root(props) {\\n  return h(\\n    Provider,\\n    { store: store },\\n    h(App, null)\\n  );\\n};\\n\\nexport default Root;\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./demo/src/App.js\n// module id = +iyJ\n// module chunks = 0","function t(t){function o(e,o){if(\"function\"==typeof t)return t(o.store.state,e)}return function(t){return function(n){function r(t,e){var r=this;n.call(this,t,e),this.state=o(t,e),this.handleStoreUpdate=function(){r.updateAnimId=setTimeout(function(){r.setState(o(r.props,r.context))})},e.store.on('*',this.handleStoreUpdate)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.componentWillUnmount=function(){window.clearTimeout(this.updateAnimId),this.context.store.off('*',this.handleStoreUpdate)},r.prototype.render=function(o, n){return e.h(t,Object.assign({},Object.assign({},o),n,{emit:this.context.store.emit}))},r}(e.Component)}}Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"preact\"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{store:this.props.store}},e.prototype.render=function(t){return t.children[0]},e}(e.Component);exports.Provider=o,exports.connect=t;\n//# sourceMappingURL=preact-smitty.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/preact-smitty/dist/preact-smitty.js\n// module id = 97Jz\n// module chunks = 0","!function(global, factory) {\n    'object' == typeof exports && 'undefined' != typeof module ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var children, lastSimple, child, simple, i;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !0 && child !== !1) {\n            if ('number' == typeof child) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                (children || (children = [])).push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || EMPTY_CHILDREN);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else ;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent && 'undefined' != typeof parent.ownerSVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var ref = vnode && vnode.attributes && vnode.attributes.ref;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text && dom.parentNode) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll, !!props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        if (ref) (props.ref = ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, absorb) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || absorb || props || _child instanceof Text) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if (!(attrs && name in attrs) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        if (attrs) for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/preact/dist/preact.js\n// module id = EF6w\n// module chunks = 0","// eslint-disable-next-line no-unused-vars\n/** @jsx h */\nimport { render, h } from 'preact'\n\nlet root\nfunction run () {\n  const Root = require('./App').default\n  root = render(<Root test={'foo'}/>, document.querySelector('#demo'), root)\n}\n\nrun()\n\nif (module.hot) {\n  // Whenever a new version of App.js is available\n  module.hot.accept('./App', function () {\n    // Require the new version and render it instead\n    run()\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/index.js","/** @jsx h */\nimport './style.css'\nimport { render, h, Component } from 'preact'\nimport { Provider, connect } from 'preact-smitty'\nimport { createStore } from '../../src'\nimport source from 'raw-loader!./App.js'\n\nconst store = createStore({\n  camera: {\n    recording: false,\n    stream: new window.MediaStream(),\n    images: []\n  }\n})\n\nstore.createActions({\n  startMediaStream: () => async store => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: false,\n        video: true\n      })\n      store.actions.mediaStreamSuccess(stream)\n    } catch (err) {\n      store.actions.mediaStreamError(err)\n    }\n  },\n  mediaStreamSuccess: 'camera/STREAM_SUCCESS',\n  mediaStreamError: 'camera/STREAM_ERROR',\n  addImage: 'camera/ADD_IMAGE'\n})\n\nstore.handleActions({\n  [store.actions.mediaStreamSuccess]: (state, stream) => {\n    state.camera.stream = stream\n  },\n  [store.actions.mediaStreamError]: (state, error) => {\n    state.camera.streamError = error\n  },\n  [store.actions.addImage]: (state, image) => {\n    state.camera.images.push(image)\n  }\n})\n\nconst pp = obj => JSON.stringify(obj, null, 2)\n\nconst Camera = connect(state => ({\n  stream: state.camera.stream,\n  streamError: state.camera.streamError\n}))(\n  class Camera extends Component {\n    video = null;\n    canvas = null;\n\n    componentDidMount () {\n      const action = this.context.store.actions.startMediaStream('test')\n      action()\n    }\n\n    render ({ streamError }) {\n      return (\n        <div\n          style={{\n            paddingTop: 16,\n            paddingRight: 16,\n            paddingBottom: 16,\n            paddingLeft: 16\n          }}\n        >\n          <h3 style={{\n            height: streamError ? 24 : 0,\n            lineHeight: '1.2',\n            marginBottom: 16,\n            textAlign: 'center', color: '#ff6b6b',\n            opacity: streamError ? 1 : 0,\n            transition: 'all 250ms ease-in-out'\n          }}>{streamError ? streamError.name : ''}</h3>\n          <video\n            ref={node => {\n              this.video = node\n            }}\n            style={{\n              width: '100%',\n              maxHeight: 'calc(50vh - 16px)',\n              background: '#212529',\n              cursor: 'pointer'\n            }}\n            src={\n              window.URL\n                ? window.URL.createObjectURL(this.props.stream)\n                : this.props.stream\n            }\n            autoplay\n            muted\n            onClick={this.handleClick}\n          />\n          <canvas\n            ref={node => {\n              this.canvas = node\n            }}\n            style={{ display: 'none' }}\n          />\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: '100%',\n              marginTop: 16,\n              marginBottom: 16\n            }}\n          >\n            <button\n              style={{\n                paddingTop: 8,\n                paddingRight: 16,\n                paddingBottom: 8,\n                paddingLeft: 16,\n                margin: '0 auto',\n                fontSize: 20,\n                lineHeight: '1.6',\n                color: '#adb5bd',\n                background: '#343a40',\n                border: 'none',\n                outline: 'none',\n                boxShadow: 'none',\n                borderRadius: 5,\n                cursor: 'pointer',\n                opacity: streamError ? 0 : 1,\n                transition: 'all 250ms ease-in-out'\n              }}\n              disabled={streamError}\n              type={'button'}\n              onClick={this.handleClick}\n            >\n              Take Picture\n            </button>\n          </div>\n\n        </div>\n      )\n    }\n\n    handleClick = () => {\n      const canvas = this.canvas\n      const ctx = canvas.getContext('2d')\n      const width = this.video.videoWidth\n      const height = this.video.videoHeight\n      canvas.width = width\n      canvas.height = height\n      ctx.fillRect(0, 0, width, height)\n      ctx.drawImage(this.video, 0, 0, width, height)\n\n      this.context.store.actions.addImage(canvas.toDataURL('image/webp'))\n    };\n  }\n)\n\nconst ImageList = connect(state => ({\n  images: state.camera.images\n}))(function ImageList ({ images }) {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexFlow: 'wrap'\n      }}\n    >\n      {images.map((image, i) => {\n        return <Image image={image} index={i} />\n      })}\n    </div>\n  )\n})\n\nfunction Image ({ image, index }) {\n  return (\n    <a\n      style={{\n        position: 'relative',\n        flex: '0 0 auto',\n        width: '33%',\n        order: index * -1\n      }}\n      href={image}\n    >\n      <img src={image} style={{ width: '100%' }} />\n    </a>\n  )\n}\n\nfunction GithubRibbon () {\n  return (\n    <iframe\n      src='https://ghbtns.com/github-btn.html?user=tkh44&amp;repo=smitty&amp;type=star&amp;count=true&amp;size=large'\n      frameborder='0'\n      scrolling='0'\n      width='160px'\n      height='30px'\n      style={{ marginLeft: 'auto' }}\n    />\n  )\n}\n\nconst App = connect(state => state)(props => (\n  <div style={{ display: 'flex' }}>\n    <div\n      style={{\n        flex: '1 0 50%',\n        height: '100vh',\n        background: '#212529',\n        overflow: 'auto',\n        WebkitOverflowScrolling: 'touch',\n        background: props.camera.streamError ? '#f8f9fa' : '#212529',\n        cursor: 'pointer',\n        transition: 'all 250ms ease-in-out'\n      }}\n    >\n      <Camera />\n    </div>\n\n    <div\n      style={{\n        flex: '1 0 50%',\n        height: '100vh',\n        background: '#f8f9fa',\n        borderLeft: '1px solid #dee2e6',\n        overflow: 'auto',\n        WebkitOverflowScrolling: 'touch'\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          borderBottom: '1px solid #dee2e6',\n          paddingRight: 8,\n          paddingLeft: 8\n        }}\n      >\n        <h2>Smitty Demo</h2>\n        <a\n          href={'https://github.com/tkh44/smitty/tree/master/demo/src'}\n          style={{ fontSize: '1rem', color: '#329af0', marginLeft: 8 }}\n          target={'_blank'}\n        >\n          source\n        </a>\n        <GithubRibbon />\n      </div>\n      <ImageList />\n    </div>\n  </div>\n))\n\nconst Root = function (props) {\n  return (\n    <Provider store={store}>\n      <App />\n    </Provider>\n  )\n}\n\nexport default Root\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/App.js","import mitt from 'mitt'\n\nclass Store {\n  constructor (initialState) {\n    this._state = initialState\n    this.actions = {}\n    this.events = mitt()\n    this.on = this.events.on\n    this.off = this.events.off\n    this.emit = this.emit.bind(this)\n    this.handleActions = this.handleActions.bind(this)\n  }\n\n  get state () {\n    return this._state\n  }\n\n  set state (nextState) {\n    this._state = nextState\n  }\n\n  emit (type, payload) {\n    if (typeof type === 'function') return type(this)\n    this.events.emit(type, payload)\n  }\n\n  createAction (type) {\n    if (typeof type === 'function') {\n      return payload => this.emit(type(payload))\n    }\n\n    const actionCreator = payload => this.emit(type, payload)\n    actionCreator.toString = () => type.toString()\n    return actionCreator\n  }\n\n  createActions (actionMap) {\n    for (let creatorName in actionMap) {\n      this.actions[creatorName] = this.createAction(actionMap[creatorName])\n    }\n  }\n\n  handleActions (handlerMap) {\n    for (let type in handlerMap) {\n      let handler = (eventType, e) => {\n        if (eventType.substring(0, 6) === 'store:') return\n        this.state = handlerMap[type](this.state, e, eventType) || this.state\n        this.events.emit('store:change', this.state)\n      }\n      if (type !== '*') {\n        handler = handler.bind(null, type)\n      }\n      this.events.on(type, handler)\n    }\n  }\n}\n\nexport function createStore (initialState) {\n  return new Store(initialState)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","function n(n){return n=n||Object.create(null),{on:function(t,o){(n[t]||(n[t]=[])).push(o)},off:function(t,o){var u=n[t]||(n[t]=[]);u.splice(u.indexOf(o)>>>0,1)},emit:function(t,o){(n[t]||[]).map(function(n){n(o)}),(n[\"*\"]||[]).map(function(n){n(t,o)})}}}module.exports=n;\n//# sourceMappingURL=mitt.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/mitt/dist/mitt.js\n// module id = tNdy\n// module chunks = 0"],"sourceRoot":""}